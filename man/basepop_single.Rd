% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/basepop.R
\name{basepop_single}
\alias{basepop_single}
\title{Construct Single-Year Base Population Using Reverse Survival}
\usage{
basepop_single(
  refDate = NULL,
  Age = NULL,
  country_code = NULL,
  Females_single = NULL,
  Males_single = NULL,
  nLxFemale = NULL,
  nLxMale = NULL,
  nLxDatesIn = NULL,
  AsfrMat = NULL,
  AsfrDatesIn = NULL,
  SRB = NULL,
  SRBDatesIn = NULL,
  radix = NULL,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{refDate}{Numeric reference date (e.g., census year). Required.}

\item{Age}{Optional numeric vector of single ages. Must match population vector length if supplied.}

\item{country_code}{Numeric ISO country code. Required for WPP data retrieval.}

\item{Females_single}{Optional numeric vector of female single-age population counts.}

\item{Males_single}{Optional numeric vector of male single-age population counts.}

\item{nLxFemale}{Optional life table \code{nLx} matrix for females. If supplied, used to derive period and cohort survival ratios.}

\item{nLxMale}{Optional life table \code{nLx} matrix for males. If supplied, used to derive period and cohort survival ratios.}

\item{nLxDatesIn}{Optional numeric vector of years corresponding to life table data.}

\item{AsfrMat}{Optional matrix of age-specific fertility rates (ASFR). If supplied, reshaped internally; if not, WPP ASFR will be downloaded.}

\item{AsfrDatesIn}{Optional numeric vector of years corresponding to ASFR data.}

\item{SRB}{Optional numeric vector or single value giving sex ratio at birth (males per female); if not supplied, WPP data are used.}

\item{SRBDatesIn}{Optional numeric vector of years corresponding to SRB input.}

\item{radix}{Numeric starting radix for life table calculations. Defaults to 1 if not inferred.}

\item{verbose}{Logical; if \code{TRUE}, prints progress messages. Default = \code{TRUE}.}

\item{...}{Additional arguments passed to internal DemoTools functions.}

\item{location}{Optional character string naming the location (used only for messages).}
}
\value{
A named list with two tibbles:
\describe{
\item{pop_hat_m}{Reconstructed male population by single year of age and cohort.}
\item{pop_hat_f}{Reconstructed female population by single year of age and cohort.}
}
}
\description{
Constructs a single-year, age-specific population for both sexes using the reverse
survival method. This combines life table data, fertility rates, and sex ratio
at birth (SRB) to estimate age-specific population counts, optionally using
user-supplied demographic data or WPP inputs.
}
\details{
The function performs the following sequence:
\enumerate{
\item Validates input arguments and loads the most recent available \code{wpp} dataset.
\item Retrieves population, mortality (\code{mx}), fertility (ASFR), and SRB data from WPP if not supplied by the user.
\item Converts \code{nLx} inputs (if provided) into period life tables and reconstructs cohort survival ratios needed for reverse survival.
\item Computes reverse-survival multipliers (\code{SxRev}) and cumulative inflation factors.
\item Estimates exposures for reproductive ages and computes annual births.
\item Splits births into male and female counts using the sex ratio at birth.
\item Reverse-survives births to reconstruct ages 0â€“9, and reverse-survives older ages using cohort-specific inflation factors.
\item Returns reconstructed population for males and females.
}

The reverse survival method is useful when historical population data are unavailable
or incomplete but life table and fertility information are known.
}
\examples{
# Example: Estimate base population for Germany, year 2000
basepop <- basepop_single(
  country_code = 276,
  refDate = 2000
)

basepop$pop_hat_m  # Male reconstructed population
basepop$pop_hat_f  # Female reconstructed population

}
