<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Age-heaping indices with DemoTools • DemoTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Age-heaping indices with DemoTools">
<meta property="og:description" content="DemoTools">
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.13.76</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetables_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Age-heaping_quality_with_Demotools_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Age-heaping indices with DemoTools</h1>
                        <h4 class="author">Jose Manuel Aburto, Ilya Kashnitsky, Marius Pascariu, Tim Riffe</h4>
            
            <h4 class="date">2022-01-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/timriffe/DemoTools/blob/master/vignettes/Age-heaping_quality_with_Demotools.Rmd"><code>vignettes/Age-heaping_quality_with_Demotools.Rmd</code></a></small>
      <div class="hidden name"><code>Age-heaping_quality_with_Demotools.Rmd</code></div>

    </div>

    
    
<div id="how-to-use-demotools-to-get-age-heaping-indices" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-demotools-to-get-age-heaping-indices" class="anchor"></a>How to use <code>DemoTools</code> to get age-heaping indices</h2>
<p>The observed age distribution of a population can be affected by various kinds of reporting errors: 1) misstatements of age, 2) incomplete enumeration at particular ages, and 3) failure to report ages <span class="citation">(United Nations 1952)</span>. These errors can have different sources. For example, ages of older women are often understated <span class="citation">(United Nations 1952)</span>. Men, on the other hand, may misrepresent their age to avoid taxation or military services in some populations <span class="citation">(United Nations 1952)</span>. In addition to these reasons, some errors are induced by how the census takes place. For instance, in many countries the census is taken by leaving the questionnaire to be filled by a family member who might have to report other family members’ age, in other countries the census information is collected by enumerators in interviews in which case the quality of declared ages depends on who is answering the interview, among other reasons <span class="citation">(United Nations 1952)</span>. In this vignette we focus on indices to measure the quality of data affected by age misstatement.</p>
<p>Consider the 1991 male census population of India.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">DemoTools</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: Rcpp</span>

<span class="co"># 'pop1m_ind' available as package data</span>
<span class="va">Age</span>   <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">pop1m_ind</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
 
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">Age</span>, <span class="va">pop1m_ind</span>, type <span class="op">=</span> <span class="st">'o'</span><span class="op">)</span>  </code></pre></div>
<p><img src="Age-heaping_quality_with_Demotools_files/figure-html/unnamed-chunk-1-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The figure above has some clear age irregularities. For example, there is a consistent clustering around ages ending in zero and five. In principle, a post-enumeration survey or a sample interview should give more information on the reasons why these irregularities appear in the data <span class="citation">(Siegel Jacob and Swanson David 2004)</span>. However, not every country has the resources to conduct a survey or post-enumeration process. Therefore, various arithmetic techniques have been developed for measuring heaping on individual ages, terminal digits, and age ranges. These estimate the degree of bias, but they do not correct it <span class="citation">(Booth and others 2015)</span>. The simplest way to analyze age-heaping is by assuming that the true numbers are <em>rectangularly</em> distributed over some age range that includes centered the age in question <span class="citation">(Siegel Jacob and Swanson David 2004)</span>.</p>
<p>Several indices of age-heaping exist. <code>DemoTools</code> implements Whipple <span class="citation">(Spoorenberg and Dutreuilh 2007)</span>, Myers, Bachi <span class="citation">(Bachi 1951)</span>, Coale-Li <span class="citation">(Coale and Li 1991)</span>, Noumbissi <span class="citation">(Noumbissi 1992)</span>, Spoorenberg <span class="citation">(Spoorenberg and Dutreuilh 2007)</span>, Jdanov <span class="citation">(Jdanov 2008)</span>, and Kannisto <span class="citation">(Kannisto 1999)</span> age-heaping indices. Although the literal interpretation of these indices may vary, they tend to covary strongly when applied to the same data and age-ranges, so for making quick judgement of the degree of heaping over a large collection of data it may not be necessary to apply more than one or two. We also offer two new measures designed to test for irregularities in data in 5-year age bins.</p>
<p>Often the degree of detected heaping suggests that some smoothing procedure is warranted, but the kind of smoothing procedure may be a function of the particular way in which heaping is manifested. For example, if heaping is light, or just a matter of rounding to the nearest digit divisible by 5, then there will be no major difference between heaping on 0s versus heaping on 5s. In this case, grouping to 5-year age bins (see <code><a href="../reference/groupAges.html">groupAges()</a></code>) and then graduating in a constrained way (see <code>sprague()</code>) may suffice to remove the distortion while maintaining the broad underlying age pattern. However, if heaping is much worse on 0s than on 5s, the age pattern may still be distorted in a regular and pernicious way even after binning in 5-year age groups. In that case, it is advised to select a smoothing procedure designed for 5-year age groups (see <code><a href="../reference/smooth_age_5.html">smooth_age_5()</a></code> and the vignette on smoothing) before graduating, or else some other more aggressive smoothing option (see <code><a href="../reference/agesmth1.html">agesmth1()</a></code>). The present vignette does not offer specific guidelines for such adjustments, but we do offer two new age quality indices that might be useful for deciding whether to resort to aggressive smoothing: <code>zero_pref_sawtooth()</code> checks for and rates the mentioned jagged pattern in 5-year age groups. <code>five_year_roughness()</code> gives a total measure of noise for data in 5-year age groups, but does not look for a particular pattern to it. This second measure should not be used in isolation, but together with visual assessment. More details about such adjustments and decisions can be found in a second vignette on smoothing.</p>
<div id="whipple-index" class="section level3">
<h3 class="hasAnchor">
<a href="#whipple-index" class="anchor"></a>Whipple Index</h3>
<p>Using this assumption over a 5-year range, Whipple’s index measures heaping usually in numbers ending in zero or five. This index is a summary measure that determines variability in the quality of age reporting between regions or countries and its evolution over time. Usually this index is calculated for digits 0 and 5 in adult ages 25 to 60. The uniformity assumption is less useful outside of this range. The original formula is given by</p>
<p><span class="math display">\[\begin{equation}
\label{eq:Whipple}
W=5\frac{P_{25}+P_{30}+P_{35}+\dots+P_{60}}{P_{23}+P_{24}+\dots+P_{61}+P_{62}},
\end{equation}\]</span></p>
<p>where <span class="math inline">\(P_x\)</span> is the population of age <span class="math inline">\(x\)</span> in completed years <span class="citation">(Spoorenberg and Dutreuilh 2007)</span>.</p>
<p>For example, the Whipple’s index using <code>DemoTools</code> between ages 25 and 60 for country x is given by</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Wi</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/check_heaping_whipple.html">check_heaping_whipple</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, ageMin <span class="op">=</span> <span class="fl">25</span>, ageMax <span class="op">=</span> <span class="fl">60</span>, digit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="va">Wi</span>
<span class="co">#&gt; [1] 2.925568</span></code></pre></div>
<p>The result varies from 1, which means no concentration around numbers ending in zero or five, to a maximum of 5 (or 10 if only a single digit is tested). The selection of calculating the index for ages 25-60 is arbitrary but it has been found to be suitable for practical purposes <span class="citation">(United Nations 1955)</span>. Whipple’s index is effective and very easy to compute. It can also be used to test for bias with respect to any single terminal digit by changing the <code>digit</code> argument. It does not give a global statement about the pervasiveness of age heaping, however.</p>
</div>
<div id="myers" class="section level3">
<h3 class="hasAnchor">
<a href="#myers" class="anchor"></a>Myers</h3>
<p>As an alternative, Myers (1940) developed a ‘blended’ index to measure preference or avoidance of all 10 digits <span class="citation">(Myers 1954)</span>. The method determines the proportion of the population whose age ends in each terminal digit (0-9), also varying the particular starting age for any 10-year age group. It is based on the principle that in the absence of age heaping, the population aggregated on each terminal digits 0-9 should represent roughly 10 percent of the total population. The method involves 5 main steps <span class="citation">(Siegel Jacob and Swanson David 2004)</span>:</p>
<ol style="list-style-type: decimal">
<li><p>Sum the populations ending in each digit over the whole range, starting with the lower limit of the range (e.g., <span class="math inline">\(10, 20, 30,\dots ,80\)</span>; <span class="math inline">\(11, 21, 31,\dots , 81\)</span>).</p></li>
<li><p>Ascertain the sum excluding the first population in each group in step 1 (e.g., <span class="math inline">\(20, 30, 40, \dots,80\)</span>; <span class="math inline">\(21, 31, 41,\dots, 81\)</span>).</p></li>
<li><p>Weight the sums in steps 1 and 2 and add the results to obtain a blended population (e.g., weights 1 and 9 for the 0 digit; weights 2 and 8 for the 1 digit).</p></li>
<li><p>Convert the distribution in step 3 into percentages.</p></li>
<li><p>Take half the sum of the absolute deviations of each percentage in step 4</p></li>
</ol>
<p>For example, the Myers index for country x using <code>DemoTools</code> is given by</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Mi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_myers.html">check_heaping_myers</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, ageMin <span class="op">=</span> <span class="fl">20</span>, ageMax <span class="op">=</span> <span class="fl">90</span><span class="op">)</span> 
<span class="va">Mi</span>
<span class="co">#&gt; [1] 40.55142</span></code></pre></div>
<p>Myers index, 40.55 in this case, expresses the extent of concentration on or avoidance of a particular digit <span class="citation">(Myers 1954)</span>. The theoretical range of Myers index is 0, representing no heaping (perfect uniformity over digits), to 90, which would result if all ages were reported at a single terminal digit <span class="citation">(Siegel Jacob and Swanson David 2004)</span>.</p>
</div>
<div id="bachi" class="section level3">
<h3 class="hasAnchor">
<a href="#bachi" class="anchor"></a>Bachi</h3>
<p>With the previous formulas, Bachi’s index involves applying the Whipple method repeatedly to determine the extent of preference for each final digit. Similarly to Myers, it equals the sum of the positive deviations from 10 percent <span class="citation">(Bachi 1951)</span>. It has a theoretical range from 0 to 90, AND 10% is the expected value for each digit. Therefore, the results of Bachi’s method is similar to those obtained by Myers’ index.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Bi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_bachi.html">check_heaping_bachi</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, ageMin <span class="op">=</span> <span class="fl">20</span>, ageMax <span class="op">=</span> <span class="fl">90</span><span class="op">)</span>
<span class="va">Bi</span>
<span class="co">#&gt; [1] 38.36192</span></code></pre></div>
</div>
<div id="noumbissi" class="section level3">
<h3 class="hasAnchor">
<a href="#noumbissi" class="anchor"></a>Noumbissi</h3>
<p>This method, based on the underlying principles and assumptions of the original Whipple’s index, improves by extending its basic principle to all ten digits. It compares single terminal digit numerators to denominators consisting in 5-year age groups centered on the terminal digit of age in question <span class="citation">(Noumbissi 1992)</span>. It relies on a weaker assumption of linearity over an age range of five years rather than ten. It is based once more on the underlying principles and assumptions of the original Whipple’s index and introduces the following formulas to measure age heaping:</p>
<p><span class="math display">\[\begin{align}
\label{eq:Noumbissi}
W_0 =5\frac{P_{30}+P_{40}+P_{50}+P_{60}}{_5P_{28}+\, _5P_{38}+\, _5P_{48}+\, _5P_{58}} \\
W_5 =5\frac{P_{25}+P_{35}+P_{45}+P_{55}}{_5P_{23}+\, _5P_{33}+\, _5P_{43}+\, _5P_{53}} \\
\end{align}\]</span></p>
<p>where <span class="math inline">\(P_x\)</span> is the population having completed age <span class="math inline">\(x\)</span> and <span class="math inline">\(_5P_x\)</span> the population of the age range <span class="math inline">\((x,x+4)\)</span>. From these, age heaping can then be calculated for all ten digits (0-9) <span class="citation">(Spoorenberg and Dutreuilh 2007)</span>. If digits are uniformly distributed, this “digit-specific modified Whipple’s index” is equal to 1 for any digit tested. An index above or below 1 indicates preference for or avoidance of the digit in question, respectively. The theoretical range is from 0 for absolute avoidance to 5 for perfect concentration on a single digit.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Ni</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_noumbissi.html">check_heaping_noumbissi</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, digit <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> 
<span class="va">Ni</span>
<span class="co">#&gt; [1] 2.349372</span></code></pre></div>
</div>
<div id="spoorenberg" class="section level3">
<h3 class="hasAnchor">
<a href="#spoorenberg" class="anchor"></a>Spoorenberg</h3>
<p>Using the digit-specific modified Whipple’s index, this index summarizes all age preference and avoidance effects by taking the sum of the absolute differences between digit-specific Whipple index and 1 (counting all differences as positive) <span class="citation">(Spoorenberg and Dutreuilh 2007)</span>. The total modified Whipple’s index (<span class="math inline">\(W_{tot}\)</span>) is written as follows:</p>
<p><span class="math display">\[\begin{equation}
W_{tot} = \sum_{i=0}^9(|W_i - 1|)
\end{equation}\]</span></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Si</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_spoorenberg.html">check_heaping_spoorenberg</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, ageMin <span class="op">=</span> <span class="fl">20</span>, ageMax <span class="op">=</span> <span class="fl">64</span><span class="op">)</span>
<span class="va">Si</span>
<span class="co">#&gt; [1] 7.044377</span></code></pre></div>
<p>The value of the index is zero if no preference is observed (a perfectly uniform digit distribution). In the case that all reported ages end in 0 or 5, the index reaches its maximum value of 16 (or a maximum of 13 if all population is concentrated on a single digit).</p>
</div>
<div id="coale-li" class="section level3">
<h3 class="hasAnchor">
<a href="#coale-li" class="anchor"></a>Coale-Li</h3>
<p>Coale and Li developed a method focusing on age misstatement at older ages because these are particularly subject to error. This error often leads to an overstatement of people (and deaths) increasing with age <span class="citation">(Coale and Li 1991)</span>. This can lead to understatement of mortality rates in older ages, and this tendency increases with age.</p>
<p>The index is based on the deviation of the number at each age from a smooth sequence by taking the ratio of the number at each age to a two-stage moving average (the five-term average of a five-term average). With no heaping, the mean index at ages divisible by 10 from 40 to 90 would be close to 1.0 <span class="citation">(Coale and Li 1991)</span>. The maximum value is 5, in the case of perfect concentration on the digit tested, or 0 if the digit has no weight.</p>
<p>In the case of enumerated Indian males in 1991 the index for age 0 is 3.8, which indicates extensive errors in reported ages.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">CLi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_coale_li.html">check_heaping_coale_li</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, ageMin <span class="op">=</span> <span class="fl">60</span>, ageMax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">Age</span><span class="op">)</span>, terms <span class="op">=</span> <span class="fl">5</span>, digit <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="va">CLi</span>
<span class="co">#&gt; [1] 3.82955</span></code></pre></div>
</div>
<div id="jdanov" class="section level3">
<h3 class="hasAnchor">
<a href="#jdanov" class="anchor"></a>Jdanov</h3>
<p>Similarly, Jdanov and colleagues <span class="citation">(Jdanov 2008)</span> developed a modified version of the index proposed by Wang et al (1997) to assess death data at old ages. It is given by <span class="math display">\[\begin{equation}
WI = \frac{D_{95}+D{100}+D{105}}{\sum_{i = 93}^{107}D_i}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(D_i\)</span> is number of deaths at age <span class="math inline">\(i\)</span>. Any deviations from the ‘golden-standard’ Sweden represent age-heaping issues. It can be implemented with the function <code><a href="../reference/check_heaping_jdanov.html">check_heaping_jdanov()</a></code>.</p>
<p>NOTE: we need single age death counts in the package data still</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Ji</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_jdanov.html">check_heaping_jdanov</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, <span class="va">Age</span>, Agei <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">95</span>,<span class="fl">100</span>,<span class="fl">105</span><span class="op">)</span><span class="op">)</span>
<span class="va">Ji</span>
<span class="co">#&gt; [1] 330.9649</span></code></pre></div>
</div>
<div id="distortions-in-5-year-data" class="section level3">
<h3 class="hasAnchor">
<a href="#distortions-in-5-year-data" class="anchor"></a>distortions in 5-year data</h3>
<p>Sometimes heaping is so much worse on 0s than on 5s that the pattern of distortion carries over into 5-year binned data. If graduated, for example using <code><a href="../reference/graduate_sprague.html">graduate_sprague()</a></code>, the jagged (or sawtooth) pattern can translate to a wave pattern, which is also not desired. The package data from India is heaped in this way to some extent in ages greater than 40.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">P5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/groupAges.html">groupAges</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, N <span class="op">=</span> <span class="fl">5</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>
<span class="va">A5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">A5</span>,<span class="va">P5</span>,type<span class="op">=</span><span class="st">'o'</span><span class="op">)</span></code></pre></div>
<p><img src="Age-heaping_quality_with_Demotools_files/figure-html/unnamed-chunk-9-1.png" width="576" style="display: block; margin: auto;"> We can test for this kind of distortion using <code><a href="../reference/check_heaping_sawtooth.html">check_heaping_sawtooth()</a></code> like so:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/check_heaping_sawtooth.html">check_heaping_sawtooth</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, Age <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span>, ageMin <span class="op">=</span> <span class="fl">40</span>, ageMax <span class="op">=</span> <span class="fl">80</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.584344</span></code></pre></div>
<p>The value is calculated in the following way: for each 5-year age group whose lower bound ends with a 0, calculate: <span class="math display">\[\begin{equation}
R_{40} = 2 * _5P_{40} / ( _5P_{35} + _5P_{45}) 
\end{equation}\]</span> and so forth, and for each group ending in 5 calculate <span class="math display">\[\begin{equation}
R_{45} = 2 * _5P_{45} / ( _5P_{40} + _5P_{50}) 
\end{equation}\]</span></p>
<p>Then if there is a sawtooth pattern, most <span class="math inline">\(R_{x0}\)</span> values will be greater than 1 and most <span class="math inline">\(R_{x5}\)</span> values less than 1, so we report a global statement: <span class="math display">\[\begin{equation}
R_{0-5} = \frac{(R_{40}+R_{50}+R_{60}+R_{70})}{R_{45}+R_{55}+R_{65}+R_{75}}
\end{equation}\]</span> If the pattern is not consistently such that <span class="math inline">\(R_{x0}&gt;1\)</span> and <span class="math inline">\(R_{x}&lt;1\)</span> (max two exceptions) then a value of <code>FALSE</code> is returned, otherwise the given ratio.</p>
<p>A quick judgement of the overall volatility of the 5-year binned data can be given by:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_heaping_roughness.html">check_heaping_roughness</a></span><span class="op">(</span><span class="va">pop1m_ind</span>, Age <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span>, ageMin <span class="op">=</span> <span class="fl">40</span>, ageMax <span class="op">=</span> <span class="fl">80</span><span class="op">)</span>
<span class="va">r5</span>
<span class="co">#&gt; [1] 0.8269583</span></code></pre></div>
<p>Values greater than 0.1 coupled with a sawtooth value greater than 0 already suggest that some smoothing is warranted. If there is no detected sawtooth pattern, then five-year-roughness indices should probably need to be higher and visually confirmed before deciding to smooth. Further guidelines can be found in the vignette on smoothing.</p>
<p>##References</p>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bachi1951tendency" class="csl-entry">
Bachi, Roberto. 1951. <span>“The Tendency to Round Off Age Returns: Measurement and Correction.”</span> <em>Bulletin of the International Statistical Institute</em> 33 (4): 195–222.
</div>
<div id="ref-booth2015demographic" class="csl-entry">
Booth, Heather, and others. 2015. <span>“Demographic Techniques, Data Adjustment and Correction.”</span> In <em>International Encyclopedia of the Social and Behavioral Sciences (2015)</em>, edited by James E. Wright, 2nd ed. Vol. 6. Oxford: Elsevier.
</div>
<div id="ref-coale1991effect" class="csl-entry">
Coale, Ansley J, and Shaomin Li. 1991. <span>“The Effect of Age Misreporting in China on the Calculation of Mortality Rates at Very High Ages.”</span> <em>Demography</em> 28 (2): 293–301.
</div>
<div id="ref-jdanov2008beyond" class="csl-entry">
Jdanov, Dmitri. 2008. <span>“Beyond the Kannisto-Thatcher Database on Old Age Mortality: An Assessment of Data Quality at Advanced Ages.”</span> <em>MPIDR Working Paper WP-2008-013</em>.
</div>
<div id="ref-kannisto1999assessing" class="csl-entry">
Kannisto, Väinö. 1999. <span>“Assessing the Information on Age at Death of Old Persons in National Vital Statistics.”</span> <em>Validation of Exceptional Longevity”, Odense Monographs on Population Aging</em> 6: 235–49.
</div>
<div id="ref-myers1954accuracy" class="csl-entry">
Myers, Robert J. 1954. <span>“Accuracy of Age Reporting in the 1950 United States Census.”</span> <em>Journal of the American Statistical Association</em> 49 (268): 826–31.
</div>
<div id="ref-noumbissi1992indice" class="csl-entry">
Noumbissi, Amadou. 1992. <span>“L’indice de Whipple Modifi<span>é</span>: Une Application Aux Donn<span>é</span>es Du Cameroun, de La Su<span>è</span>de Et de La Belgique.”</span> <em>Population (French Edition)</em>, 1038–41.
</div>
<div id="ref-siegel2004methods" class="csl-entry">
Siegel Jacob, S, and A Swanson David, eds. 2004. <em>The Methods and Materials of Demography</em>. 2nd ed. San Diego, USA: Elsevier Academic Press, California, USA.
</div>
<div id="ref-spoorenberg2007quality" class="csl-entry">
Spoorenberg, Thomas, and Catriona Dutreuilh. 2007. <span>“Quality of Age Reporting: Extension and Application of the Modified Whipple’s Index.”</span> <em>Population</em> 62 (4): 729–41.
</div>
<div id="ref-accuracyun1952" class="csl-entry">
United Nations. 1952. <span>“Accuracy Tests for Census Age Distributions Tabulated in Five-Year and Ten-Year Groups.”</span> <em>Population Bulletin</em>, no. 2: 59–79.
</div>
<div id="ref-united1955manual" class="csl-entry">
———. 1955. <em>Manual II: Methods of Appraisal of Quality of Basic Data for Population Estimates</em>. 23. New York: United Nations Department of International Economic; Social Affairs.
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sara Hertog, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
