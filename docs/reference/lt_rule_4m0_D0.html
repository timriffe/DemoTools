<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>rule of thumb for splitting infants from deaths under 5 — lt_rule_4m0_D0 • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="rule of thumb for splitting infants from deaths under 5 — lt_rule_4m0_D0" />
<meta property="og:description" content="Given the log crude death rate for ages 0-5, \(log(M(0,5)\) there is a rough 2-slope linear relationship with the log of the proportion of deaths under 5 that occur in the first year of life. This rule uses this two-slope linear relationship to estimate the proportion of deaths in age 0, and then split these from deaths under 5. The relationship is slightly different between males and females. This method is only to be invoked if neither population nor deaths are available in a separate tabulation for single age 0." />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.13.76</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetables_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>rule of thumb for splitting infants from deaths under 5</h1>
    <small class="dont-index">Source: <a href='https://github.com/timriffe/DemoTools/blob/master/R/lt_rule.R'><code>R/lt_rule.R</code></a></small>
    <div class="hidden name"><code>lt_rule_4m0_D0.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given the log crude death rate for ages 0-5, \(log(M(0,5)\) there is a rough 2-slope linear relationship with the log of the proportion of deaths under 5 that occur in the first year of life. This rule uses this two-slope linear relationship to estimate the proportion of deaths in age 0, and then split these from deaths under 5. The relationship is slightly different between males and females. This method is only to be invoked if neither population nor deaths are available in a separate tabulation for single age 0.</p>
    </div>

    <pre class="usage"><span class='fu'>lt_rule_4m0_D0</span><span class='op'>(</span><span class='va'>D04</span>, <span class='va'>M04</span>, <span class='va'>P04</span>, Sex <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"m"</span>, <span class='st'>"f"</span><span class='op'>)</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>D04</th>
      <td><p>numeric. Deaths under age 5.</p></td>
    </tr>
    <tr>
      <th>M04</th>
      <td><p>numeric. Death rate under age 5.</p></td>
    </tr>
    <tr>
      <th>P04</th>
      <td><p>numeric. Exposure under age 5. A population estimate will do.</p></td>
    </tr>
    <tr>
      <th>Sex</th>
      <td><p>character, either <code>"m"</code> or <code>"f"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Estimated deaths in age 0</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is an elsewhere-undocumented relationship derived from the whole of the HMD. We used the <code>segmented</code> package to fit a 2-slope linear model. This can (and should) be reproduced using data from a more diverse collection, and even as-is the data should be subset to only those observations where deaths and populations were not split using HMD methods. You can reproduce the analysis given a data set in the format shown (but not executed) in the examples and following the code steps shown there.</p>
<p>Regarding argument specification, <code>D04</code> is required, in which case either <code>M04</code> or <code>P04</code> can be given to continue.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Muggeo VM (2008).
&#8220;segmented: an R Package to Fit Regression Models with Broken-Line Relationships.&#8221;
<em>R News</em>, <b>8</b>(1), 20--25.
<a href='https://cran.r-project.org/doc/Rnews/'>https://cran.r-project.org/doc/Rnews/</a>.</p>
<p>Human Mortality Database</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># to reproduce the coefficient estimation</span>
<span class='co'># that the method is based on:</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># get data in this format:</span>
  <span class='co'># dput(head(Dat))</span>
<span class='va'>Dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/structure.html'>structure</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    lDR0 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.182459515740971</span>, <span class='op'>-</span><span class='fl'>0.147321312595521</span>,
             <span class='op'>-</span><span class='fl'>0.138935222455608</span>, <span class='op'>-</span><span class='fl'>0.156873832361186</span>,
         <span class='op'>-</span><span class='fl'>0.134782094278661</span>, <span class='op'>-</span><span class='fl'>0.135213007819874</span><span class='op'>)</span>,
    lM5 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>4.38578221044468</span>, <span class='op'>-</span><span class='fl'>4.56777854985643</span>,
        <span class='op'>-</span><span class='fl'>4.58851248767896</span>, <span class='op'>-</span><span class='fl'>4.57684656734645</span>,
        <span class='op'>-</span><span class='fl'>4.62854681692805</span>, <span class='op'>-</span><span class='fl'>4.61294106314254</span><span class='op'>)</span><span class='op'>)</span>,
        .Names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lDR0"</span>, <span class='st'>"lM5"</span><span class='op'>)</span>,
        class <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"data.frame"</span><span class='op'>)</span>,
    row.names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='op'>-</span><span class='fl'>6L</span><span class='op'>)</span><span class='op'>)</span>
 <span class='co'># where lDRO is log(D0 / D0_4)</span>
 <span class='co'># i.e. lof of proportion of deaths &lt; 5 in first year of life</span>
 <span class='co'># and lM5 is log(M0_4)</span>
 <span class='co'># i.e. log of death rate in first 5 years of life</span>

 <span class='co'># then first fit a linear model:</span>
  <span class='va'>obj</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>lDR0</span><span class='op'>~</span><span class='va'>lM5</span>, data <span class='op'>=</span> <span class='va'>Dat</span><span class='op'>)</span>
 <span class='co'># use segmented package:</span>
  <span class='va'>seg</span>  <span class='op'>&lt;-</span> <span class='fu'>segmented</span><span class='fu'>::</span><span class='fu'>segmented</span><span class='op'>(</span><span class='va'>obj</span><span class='op'>)</span>
 <span class='co'># breakpoint:</span>
  <span class='va'>seg</span><span class='op'>$</span><span class='va'>psi</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>     <span class='co'># brk</span>
 <span class='co'># first intercept:</span>
  <span class='va'>seg</span><span class='op'>$</span><span class='va'>coef</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>    <span class='co'># int1</span>
 <span class='co'># first slope:</span>
  <span class='va'>seg</span><span class='op'>$</span><span class='va'>coef</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>    <span class='co'># s1</span>
 <span class='co'># difference in slope from 1st to second:</span>
  <span class='va'>seg</span><span class='op'>$</span><span class='va'>coef</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>]</span>    <span class='co'># ds1</span>
 <span class='co'># make Dat come from some other dataset and you'll get different coefs,</span>
 <span class='co'># it'd be possible to have these in families maybe, and in any case</span>
 <span class='co'># different for males and females. This is just a rough start, to be</span>
 <span class='co'># replaced if someone offers a superior method. These</span>

<span class='op'>}</span>
<span class='va'>D0_4</span> <span class='op'>&lt;-</span> <span class='fl'>2e4</span>
<span class='va'>M0_4</span> <span class='op'>&lt;-</span> <span class='fl'>5</span><span class='op'>/</span><span class='fl'>1000</span>
<span class='va'>P0_4</span> <span class='op'>&lt;-</span> <span class='fl'>4e6</span>
<span class='co'># function usage straightforward, also vectorized.</span>
<span class='va'>D0</span>   <span class='op'>&lt;-</span> <span class='fu'>lt_rule_4m0_D0</span><span class='op'>(</span><span class='va'>D0_4</span>, <span class='va'>M0_4</span>, Sex <span class='op'>=</span> <span class='st'>"m"</span><span class='op'>)</span>
<span class='co'># deaths in ages 1-4 are a separate step.</span>
<span class='va'>D1_4</span> <span class='op'>&lt;-</span> <span class='va'>D0_4</span> <span class='op'>-</span> <span class='va'>D0</span>

<span class='co'># to get M0_4 it's best to follow these steps:</span>
<span class='co'># 1) get M0 using lt_rule_4m0_m0(M0_4),</span>
<span class='va'>M0</span>   <span class='op'>&lt;-</span> <span class='fu'><a href='lt_rule_4m0_m0.html'>lt_rule_4m0_m0</a></span><span class='op'>(</span><span class='va'>M0_4</span><span class='op'>)</span>
<span class='co'># 2) get denom using P0 = D0 / M0</span>
<span class='va'>P0</span>   <span class='op'>&lt;-</span> <span class='va'>D0</span> <span class='op'>/</span> <span class='va'>M0</span>
<span class='co'># 3) get denom P1_4  as P0_4 - P0</span>
<span class='va'>P1_4</span> <span class='op'>&lt;-</span> <span class='va'>P0_4</span> <span class='op'>-</span> <span class='va'>P0</span>
<span class='co'># 4) M1_4 = D1_4 / P1_4.</span>
<span class='va'>M1_4</span> <span class='op'>&lt;-</span> <span class='va'>D1_4</span> <span class='op'>/</span> <span class='va'>P1_4</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='cn'>NULL</span>, type <span class='op'>=</span> <span class='st'>'n'</span>, xlim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>5</span><span class='op'>)</span>, ylim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1e-3</span>, <span class='fl'>.025</span><span class='op'>)</span>, log <span class='op'>=</span> <span class='st'>"y"</span>,
    xlab <span class='op'>=</span> <span class='st'>"Age"</span>, ylab <span class='op'>=</span> <span class='st'>"log(rate)"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/segments.html'>segments</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>M0_4</span>, <span class='fl'>5</span>, <span class='va'>M0_4</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/segments.html'>segments</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>M0</span>, <span class='fl'>1</span>, <span class='va'>M0</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/segments.html'>segments</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='va'>M1_4</span>, <span class='fl'>5</span>, <span class='va'>M1_4</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/text.html'>text</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>M0</span>, <span class='va'>M1_4</span>, <span class='va'>M0_4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"M0"</span>, <span class='st'>"M1_4"</span>, <span class='st'>"M0_4"</span><span class='op'>)</span>, pos <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sara Hertog, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


