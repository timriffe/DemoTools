<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The BPA and BPE methods for adjusting age groups under 10 — basepop • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="The BPA and BPE methods for adjusting age groups under 10 — basepop" />
<meta property="og:description" content="Adjust population counts for the age groups 0, 1-4 and 5-9" />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.09.02</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetable_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>The BPA and BPE methods for adjusting age groups under 10</h1>
    <small class="dont-index">Source: <a href='https://github.com/timriffe/DemoTools/blob/master/R/basepop.R'><code>R/basepop.R</code></a></small>
    <div class="hidden name"><code>basepop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adjust population counts for the age groups 0, 1-4 and 5-9</p>
    </div>

    <pre class="usage"><span class='fu'>basepop</span>(
  <span class='no'>refYear</span>,
  <span class='no'>Females</span>,
  <span class='no'>SRB</span>,
  <span class='no'>nlxFemale</span>,
  <span class='no'>nlxDatesIn</span>,
  <span class='no'>asfrMat</span>,
  <span class='no'>AsfrDatesIn</span>,
  <span class='no'>...</span>,
  <span class='kw'>Sex</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"f"</span>, <span class='st'>"m"</span>),
  <span class='kw'>SmoothedFemales</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>Males</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>nlxMale</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>refYear</th>
      <td><p>An integer. The decimal reference year for which the reported population pertain</p></td>
    </tr>
    <tr>
      <th>Females</th>
      <td><p>A numeric vector. Reported population by abridged 5-year lower bound age groups for females pertaining to <code>refYear</code>. This means that age 0 must be kept as a single age, ages 1-4 must grouped together as abridged age 1, and thereafter 5-year age groups</p></td>
    </tr>
    <tr>
      <th>SRB</th>
      <td><p>A numeric. Sex ratio at birth (males / females)</p></td>
    </tr>
    <tr>
      <th>nlxFemale</th>
      <td><p>A numeric matrix. The female nLx function of two life tables with ages in the rows and time in columns. The earlier date should be at least 7.5 years before the reference date of the "reported" population. The later date should be no earlier than one-half year before the reference date of the "reported" population</p></td>
    </tr>
    <tr>
      <th>nlxDatesIn</th>
      <td><p>Vector of dates. The dates which pertain to the columns in <code>nlxFemale</code> and <code>nlxMale</code>. For details on the format of the dates, see the details of <code><a href='interp.html'>interp</a></code></p></td>
    </tr>
    <tr>
      <th>asfrMat</th>
      <td><p>A numeric matrix. An age-period matrix of age specific fertility rates with age in rows, time in columns.</p></td>
    </tr>
    <tr>
      <th>AsfrDatesIn</th>
      <td><p>A vector of dates. The dates which pertain to the columns in <code>asfrMat</code>. For details on the format of the dates, see the details of <code><a href='interp.html'>interp</a></code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to <code><a href='interp.html'>interp</a></code>. In particular, users might be interested in changing the interpolation method. By default, it's linearly interpolated</p></td>
    </tr>
    <tr>
      <th>Sex</th>
      <td><p>A character string. Either 'f' or 'm', for adjusting either <code>Females</code> or <code>Males</code>. See the details section for the mandatory arguments for adjusting the male counts.</p></td>
    </tr>
    <tr>
      <th>SmoothedFemales</th>
      <td><p>A numeric vector. This should be the result of passing the <code>Females</code> arguments through <code>smooth_age_5</code>. It is assumed that this argument is a numeric vector with the lower bound age group definitions as names. By default, this is what <code>smooth_age_5</code> returns. See the example section for an example.</p></td>
    </tr>
    <tr>
      <th>Males</th>
      <td><p>A numeric vector. Reported population by abridged 5-year lower bound age groups for males pertaining to <code>refYear</code>. This means that age 0 must be kept as a single age, ages 1-4 must grouped together as abridged age 1, and thereafter 5-year age groups. This argument is only used when <code>Sex</code> is set to <code>"m"</code></p></td>
    </tr>
    <tr>
      <th>nlxMale</th>
      <td><p>A numeric matrix. The male nLx function of two life tables with ages in the rows and time in columns. The male nLx functions should be for age groups 0, 1 to 4, and 5 to 9. The dates which are represented in the columns are assumed to be the same as <code>nlxDatesIn</code>. This argument is only used when <code>Sex</code> is set to <code>"m"</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector of adjusted counts for the age groups 0, 1-4 and
5-9 for either <code>Females</code> or <code>Males</code>, depending on whether the
user specified <code>"m"</code> or <code>"f"</code> in <code>Sex</code>. The remaining age
counts are left as is.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>basepop</code> can estimate both the BPA and BPE methods. If the user
specifies <code>SmoothedFemales</code>, <code>basepop</code> will return the BPA
method. If <code>SmoothedFemales</code> is left empty, <code>basepop</code> will
adjusting using the BPE method.</p>
<p>Adjusting the the female population counts is the default. For this, all
arguments except <code>Males</code> and <code>nlxMale</code> are needed. However, for
adjusting the male population counts, the user needs to specify all arguments
as well as <code>Males</code>, <code>nlxMale</code> and <code>nlxFemale</code> and set
<code>sex == "m"</code>.</p>
<p>Currently, <code>basepop</code> only works with abridged five year age groups.</p>
    <h2 class="hasAnchor" id="bpa"><a class="anchor" href="#bpa"></a>BPA</h2>

    


<p>Description:</p>
<p>The method estimates a smoothed population ages 10 and over and adjusts the population under age 10 using the smoothed population and estimates of fertility and mortality.</p>
<p>Based on the smoothed female population counts, it rejuvenates the female
"reported" population 20 to 59 years of age for the two 5 year periods prior
to the census date to represent the female population in reproductive ages
5 and 10 years earlier.  Based on the rejuvenated population and fertility
and mortality levels, the method then estimates the male and female births
during the two 5 year periods prior to the census date. Next, it projects
the two 5-year birth cohorts to the census date. The projected figures
represent the adjusted population ages 0 to 4 years and 5 to 9 years
at the census date.</p>
<p>Advantages:</p>
<p>(1) The method adjusts under-10 population to be consistent with fertility and mortality levels and adjusted adult female population.</p>
<p>Limitations:</p>
<p>(1) BPA assumes a linear change in fertility and mortality during the decade prior to the reference year.</p>
<p>(2) The procedure ignores migration, which can lead to misleading results.  There are two issues. First, age groups 0-4 and 5-9 are subject to migration, which would affect the comparability of estimated and reported populations in the base year.  Second, the estimated size of age groups 0-4 and 5-9 are calculated from numbers of women of reproductive age in the base year rejuvenated to points in the past.  With migration, rejuvenated number of women may exceed or be smaller than the number present, and giving birth to children, in the decade prior to the base year.</p>
<p>(3) BPA’s smoothing calculations may mask unusual, but real, variations in population age group size.  Smoothing irregularities in age structure not attributable to age misreporting will distort estimated births and survived children in the base year.</p>
<p>Assumptions:</p>
<p>(1) No significant international migration took place within the reference periods for the population, mortality, and fertility input.</p>
<p>(2) The data input as the "reported" population is not affected by underenumeration of persons in certain ages, nor by age misreporting.</p>
    <h2 class="hasAnchor" id="bpe"><a class="anchor" href="#bpe"></a>BPE</h2>

    


<p>Description:</p>
<p>The method adjusts the population under age 10 using the reported population ages 10 and above and estimates of fertility and mortality.</p>
<p>The method rejuvenates the reported female population 20 to 59 years of age
for the two 5 year periods prior to the census date to represent the female
population in reproductive ages 5 and 10 years earlier. Based on the
rejuvenated population and fertility and mortality levels, the method then
estimates the male and female births during the two 5 year periods prior to
the census date.  Next, it projects the two 5-year birth cohorts to the
census date.  The projected figures represent the adjusted population ages
0 to 4 years and 5 to 9 years at the census date.</p>
<p>Advantages:</p>
<p>(1) The method adjusts the under-10 population to be consistent with fertility and mortality levels and adult female population.</p>
<p>Limitations:</p>
<p>(1) BPE assumes a linear change in fertility and mortality during the decade prior to the reference year.</p>
<p>(2) The procedure ignores migration, which can lead to misleading results.  There are two issues.  First, age groups 0-4 and 5-9 are subject to migration, which would affect the comparability of estimated and reported populations in the base year.  Second, the estimated size of age groups 0-4 and 5-9 are calculated from numbers of women of reproductive age in the base year rejuvenated to points in the past.  With migration, rejuvenated number of women may exceed or be smaller than the number present, and giving birth to children, in the decade prior to the base year.</p>
<p>(3) The method does not adjust for possible underenumeration and age misreporting errors in the over-10 “reported” population. If the reported population is subject to age-misreporting or age-sex-specific underenumeration, the over-10 population should be smoothed or otherwise corrected prior to use.</p>
<p>Assumptions:</p>
<p>(1) No significant international migration took place within the reference periods for the population, mortality, and fertility input.</p>
<p>(2) The data input as the “reported” population is not affected by underenumeration of persons in certain ages, nor by age misreporting.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Arriaga EE, Johnson PD, Jamison E (1994).
<em>Population analysis with microcomputers</em>, volume 1.
Bureau of the Census.

United States Census Bureau (2017).
&#8220;Population Analysis System (PAS) Software.&#8221;
https://www.census.gov/data/software/pas.html, <a href='https://www.census.gov/data/software/pas.html'>https://www.census.gov/data/software/pas.html</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
 <span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
 <span class='co'># (1) RefYear</span>
 <span class='no'>refYear</span> <span class='kw'>&lt;-</span> <span class='fl'>1986.21</span>

 <span class='co'># (2) Reported population by 5-year age groups and sex in the base year (Include unknowns).</span>
 <span class='no'>pop_male_counts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>`0`</span> <span class='kw'>=</span> <span class='fl'>11684</span>,
                      <span class='kw'>`1`</span> <span class='kw'>=</span> <span class='fl'>46738</span>,
                      <span class='kw'>`5`</span> <span class='kw'>=</span> <span class='fl'>55639</span>,
                      <span class='kw'>`10`</span> <span class='kw'>=</span> <span class='fl'>37514</span>,
                      <span class='kw'>`15`</span> <span class='kw'>=</span> <span class='fl'>29398</span>,
                      <span class='kw'>`20`</span> <span class='kw'>=</span> <span class='fl'>27187</span>,
                      <span class='kw'>`25`</span> <span class='kw'>=</span> <span class='fl'>27770</span>,
                      <span class='kw'>`30`</span> <span class='kw'>=</span> <span class='fl'>20920</span>,
                      <span class='kw'>`35`</span> <span class='kw'>=</span> <span class='fl'>16973</span>,
                      <span class='kw'>`40`</span> <span class='kw'>=</span> <span class='fl'>14999</span>,
                      <span class='kw'>`45`</span> <span class='kw'>=</span> <span class='fl'>11330</span>,
                      <span class='kw'>`50`</span> <span class='kw'>=</span> <span class='fl'>10415</span>,
                      <span class='kw'>`55`</span> <span class='kw'>=</span> <span class='fl'>6164</span>,
                      <span class='kw'>`60`</span> <span class='kw'>=</span> <span class='fl'>7330</span>,
                      <span class='kw'>`65`</span> <span class='kw'>=</span> <span class='fl'>3882</span>,
                      <span class='kw'>`70`</span> <span class='kw'>=</span> <span class='fl'>3882</span>,
                      <span class='kw'>`75`</span> <span class='kw'>=</span> <span class='fl'>1840</span>,
                      <span class='kw'>`80`</span> <span class='kw'>=</span> <span class='fl'>4200</span>
                      )

 <span class='no'>pop_female_counts</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>`0`</span> <span class='kw'>=</span> <span class='fl'>11673</span>,
                        <span class='kw'>`1`</span> <span class='kw'>=</span> <span class='fl'>46693</span>,
                        <span class='kw'>`5`</span> <span class='kw'>=</span> <span class='fl'>55812</span>,
                        <span class='kw'>`10`</span> <span class='kw'>=</span> <span class='fl'>35268</span>,
                        <span class='kw'>`15`</span> <span class='kw'>=</span> <span class='fl'>33672</span>,
                        <span class='kw'>`20`</span> <span class='kw'>=</span> <span class='fl'>31352</span>,
                        <span class='kw'>`25`</span> <span class='kw'>=</span> <span class='fl'>33038</span>,
                        <span class='kw'>`30`</span> <span class='kw'>=</span> <span class='fl'>24029</span>,
                        <span class='kw'>`35`</span> <span class='kw'>=</span> <span class='fl'>16120</span>,
                        <span class='kw'>`40`</span> <span class='kw'>=</span> <span class='fl'>14679</span>,
                        <span class='kw'>`45`</span> <span class='kw'>=</span> <span class='fl'>8831</span>,
                        <span class='kw'>`50`</span> <span class='kw'>=</span> <span class='fl'>9289</span>,
                        <span class='kw'>`55`</span> <span class='kw'>=</span> <span class='fl'>4172</span>,
                        <span class='kw'>`60`</span> <span class='kw'>=</span> <span class='fl'>6174</span>,
                        <span class='kw'>`65`</span> <span class='kw'>=</span> <span class='fl'>2715</span>,
                        <span class='kw'>`70`</span> <span class='kw'>=</span> <span class='fl'>3344</span>,
                        <span class='kw'>`75`</span> <span class='kw'>=</span> <span class='fl'>1455</span>,
                        <span class='kw'>`80`</span> <span class='kw'>=</span> <span class='fl'>4143</span>)

 <span class='co'># (4) Sex ratio at birth (m/f)</span>
 <span class='no'>sex_ratio</span> <span class='kw'>&lt;-</span> <span class='fl'>1.0300</span>

 <span class='co'># (6) The male and female nLx functions for ages under 1 year, 1 to 4 years, and 5 to 9</span>
 <span class='co'># years, pertaining to an earlier and later date</span>
 <span class='no'>nlxDatesIn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1977.31</span>, <span class='fl'>1986.50</span>)

 <span class='no'>nlxMale</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>87732</span>,
                     <span class='fl'>304435</span>,
                     <span class='fl'>361064</span>,
                     <span class='fl'>88451</span>,
                     <span class='fl'>310605</span>,
                     <span class='fl'>370362</span>
                     ),
                   <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)

 <span class='no'>nlxFemale</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>89842</span>,
                       <span class='fl'>314521</span>,
                       <span class='fl'>372681</span>,
                       <span class='fl'>353053</span>,
                       <span class='fl'>340650</span>,
                       <span class='fl'>326588</span>,
                       <span class='fl'>311481</span>,
                       <span class='fl'>295396</span>,
                       <span class='fl'>278646</span>,
                       <span class='fl'>261260</span>,
                       <span class='fl'>241395</span>,
                       <span class='fl'>217419</span>,
                       <span class='fl'>90478</span>,
                       <span class='fl'>320755</span>,
                       <span class='fl'>382531</span>,
                       <span class='fl'>364776</span>,
                       <span class='fl'>353538</span>,
                       <span class='fl'>340687</span>,
                       <span class='fl'>326701</span>,
                       <span class='fl'>311573</span>,
                       <span class='fl'>295501</span>,
                       <span class='fl'>278494</span>,
                       <span class='fl'>258748</span>,
                       <span class='fl'>234587</span>),
                     <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>12</span>,
                     <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)

 <span class='co'># (7) A set of age-specific fertility rates pertaining to an earlier and later</span>
 <span class='co'># date</span>

 <span class='no'>asfrmat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"15-19"</span> <span class='kw'>=</span> <span class='fl'>0.2000</span>,
                     <span class='st'>"20-24"</span> <span class='kw'>=</span> <span class='fl'>0.3000</span>,
                     <span class='st'>"25-29"</span> <span class='kw'>=</span> <span class='fl'>0.3000</span>,
                     <span class='st'>"30-34"</span> <span class='kw'>=</span> <span class='fl'>0.2500</span>,
                     <span class='st'>"35-39"</span> <span class='kw'>=</span> <span class='fl'>0.2000</span>,
                     <span class='st'>"40-44"</span> <span class='kw'>=</span> <span class='fl'>0.1500</span>,
                     <span class='st'>"45-49"</span> <span class='kw'>=</span> <span class='fl'>0.0500</span>,
                     <span class='st'>"15-19"</span> <span class='kw'>=</span> <span class='fl'>0.1500</span>,
                     <span class='st'>"20-24"</span> <span class='kw'>=</span> <span class='fl'>0.2000</span>,
                     <span class='st'>"25-29"</span> <span class='kw'>=</span> <span class='fl'>0.2750</span>,
                     <span class='st'>"30-34"</span> <span class='kw'>=</span> <span class='fl'>0.2250</span>,
                     <span class='st'>"35-39"</span> <span class='kw'>=</span> <span class='fl'>0.1750</span>,
                     <span class='st'>"40-44"</span> <span class='kw'>=</span> <span class='fl'>0.1250</span>,
                     <span class='st'>"45-49"</span> <span class='kw'>=</span> <span class='fl'>0.0500</span>),
                   <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>7</span>,
                   <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)

 <span class='no'>AsfrDatesIn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1977.81</span>, <span class='fl'>1985.71</span>)

 <span class='no'>smoothed_females</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='smooth_age_5.html'>smooth_age_5</a></span>(<span class='kw'>Value</span> <span class='kw'>=</span> <span class='no'>pop_female_counts</span>,
                                  <span class='kw'>Age</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>pop_female_counts</span>)),
                                  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"Arriaga"</span>,
                                  <span class='kw'>OAG</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                                  <span class='kw'>young.tail</span> <span class='kw'>=</span> <span class='st'>"Original"</span>)

 <span class='co'>## This is the only number that messes up the whole calculation.</span>
 <span class='co'>## smooth_age_5 returns the same result as the PASS excel sheet</span>
 <span class='co'>## except for the age groups 10-15 and 15-19. Here we only use</span>
 <span class='co'>## age group 15-19. If we plug in manually the correct value,</span>
 <span class='co'>## we get all results match exactly, otherwise there are</span>
 <span class='co'>## some differences.</span>
 <span class='no'>smoothed_females</span>[<span class='fl'>4</span>] <span class='kw'>&lt;-</span> <span class='fl'>34721</span>

 <span class='co'># For adjusting using BPA for males, we need to specify</span>
 <span class='co'># Sex = "m" with Males and nlxMale.</span>
 <span class='no'>bpa_male</span> <span class='kw'>&lt;-</span>
   <span class='fu'>basepop</span>(
     <span class='kw'>refYear</span> <span class='kw'>=</span> <span class='no'>refYear</span>,
     <span class='kw'>Males</span> <span class='kw'>=</span> <span class='no'>pop_male_counts</span>,
     <span class='kw'>Females</span> <span class='kw'>=</span> <span class='no'>pop_female_counts</span>,
     <span class='kw'>SmoothedFemales</span> <span class='kw'>=</span> <span class='no'>smoothed_females</span>,
     <span class='kw'>SRB</span> <span class='kw'>=</span> <span class='no'>sex_ratio</span>,
     <span class='kw'>nlxFemale</span> <span class='kw'>=</span> <span class='no'>nlxFemale</span>,
     <span class='kw'>nlxMale</span> <span class='kw'>=</span> <span class='no'>nlxMale</span>,
     <span class='kw'>nlxDatesIn</span> <span class='kw'>=</span> <span class='no'>nlxDatesIn</span>,
     <span class='kw'>asfrMat</span> <span class='kw'>=</span> <span class='no'>asfrmat</span>,
     <span class='kw'>AsfrDatesIn</span> <span class='kw'>=</span> <span class='no'>AsfrDatesIn</span>,
     <span class='kw'>Sex</span> <span class='kw'>=</span> <span class='st'>"m"</span>
     )

 <span class='co'># See adjustments?</span>
 <span class='no'>pop_male_counts</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpa_male</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]

 <span class='co'># Adjusting the BPA for females requires less arguments</span>

 <span class='no'>bpa_female</span> <span class='kw'>&lt;-</span>
   <span class='fu'>basepop</span>(
     <span class='kw'>refYear</span> <span class='kw'>=</span> <span class='no'>refYear</span>,
     <span class='kw'>Females</span> <span class='kw'>=</span> <span class='no'>pop_female_counts</span>,
     <span class='kw'>SmoothedFemales</span> <span class='kw'>=</span> <span class='no'>smoothed_females</span>,
     <span class='kw'>SRB</span> <span class='kw'>=</span> <span class='no'>sex_ratio</span>,
     <span class='kw'>nlxFemale</span> <span class='kw'>=</span> <span class='no'>nlxFemale</span>,
     <span class='kw'>nlxDatesIn</span> <span class='kw'>=</span> <span class='no'>nlxDatesIn</span>,
     <span class='kw'>asfrMat</span> <span class='kw'>=</span> <span class='no'>asfrmat</span>,
     <span class='kw'>AsfrDatesIn</span> <span class='kw'>=</span> <span class='no'>AsfrDatesIn</span>,
     <span class='kw'>Sex</span> <span class='kw'>=</span> <span class='st'>"f"</span>
   )

 <span class='no'>pop_female_counts</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpa_female</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]

 <span class='co'># For adjustment using BPE, we use exactly the same definitions as above</span>
 <span class='co'># but remove SmoothedFemales.</span>
 <span class='no'>bpe_male</span> <span class='kw'>&lt;-</span>
   <span class='fu'>basepop</span>(
     <span class='kw'>refYear</span> <span class='kw'>=</span> <span class='no'>refYear</span>,
     <span class='kw'>Males</span> <span class='kw'>=</span> <span class='no'>pop_male_counts</span>,
     <span class='kw'>Females</span> <span class='kw'>=</span> <span class='no'>pop_female_counts</span>,
     <span class='kw'>SRB</span> <span class='kw'>=</span> <span class='no'>sex_ratio</span>,
     <span class='kw'>nlxFemale</span> <span class='kw'>=</span> <span class='no'>nlxFemale</span>,
     <span class='kw'>nlxMale</span> <span class='kw'>=</span> <span class='no'>nlxMale</span>,
     <span class='kw'>nlxDatesIn</span> <span class='kw'>=</span> <span class='no'>nlxDatesIn</span>,
     <span class='kw'>asfrMat</span> <span class='kw'>=</span> <span class='no'>asfrmat</span>,
     <span class='kw'>AsfrDatesIn</span> <span class='kw'>=</span> <span class='no'>AsfrDatesIn</span>,
     <span class='kw'>Sex</span> <span class='kw'>=</span> <span class='st'>"m"</span>
     )

 <span class='co'># See adjustments?</span>
 <span class='no'>pop_male_counts</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpa_male</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpe_male</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]

 <span class='co'># Adjusting the BPA for females requires less arguments</span>

 <span class='no'>bpe_female</span> <span class='kw'>&lt;-</span>
   <span class='fu'>basepop</span>(
     <span class='kw'>refYear</span> <span class='kw'>=</span> <span class='no'>refYear</span>,
     <span class='kw'>Females</span> <span class='kw'>=</span> <span class='no'>pop_female_counts</span>,
     <span class='kw'>SRB</span> <span class='kw'>=</span> <span class='no'>sex_ratio</span>,
     <span class='kw'>nlxFemale</span> <span class='kw'>=</span> <span class='no'>nlxFemale</span>,
     <span class='kw'>nlxDatesIn</span> <span class='kw'>=</span> <span class='no'>nlxDatesIn</span>,
     <span class='kw'>asfrMat</span> <span class='kw'>=</span> <span class='no'>asfrmat</span>,
     <span class='kw'>AsfrDatesIn</span> <span class='kw'>=</span> <span class='no'>AsfrDatesIn</span>,
     <span class='kw'>Sex</span> <span class='kw'>=</span> <span class='st'>"f"</span>
   )

 <span class='no'>pop_female_counts</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpa_female</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 <span class='no'>bpe_female</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]
 }</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


