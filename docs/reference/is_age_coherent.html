<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>check for coherence within Age and between Age and AgeInt — is_age_coherent • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="check for coherence within Age and between Age and AgeInt — is_age_coherent" />
<meta property="og:description" content="A few checks are carried out to test if Age is internally consistent, that OAG is consistent with AgeInt, and that Age and AgeInt are consistent with one another. For Age to be internally consistent, we cannot have redundant values, and values must be sequential." />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.13.76</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetables_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>check for coherence within Age and between Age and AgeInt</h1>
    <small class="dont-index">Source: <a href='https://github.com/timriffe/DemoTools/blob/master/R/utilsAge.R'><code>R/utilsAge.R</code></a></small>
    <div class="hidden name"><code>is_age_coherent.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A few checks are carried out to test if <code>Age</code> is internally consistent, that <code>OAG</code> is consistent with <code>AgeInt</code>, and that <code>Age</code> and <code>AgeInt</code> are consistent with one another. For <code>Age</code> to be internally consistent, we cannot have redundant values, and values must be sequential.</p>
    </div>

    <pre class="usage"><span class='fu'>is_age_coherent</span><span class='op'>(</span><span class='va'>Age</span>, <span class='va'>AgeInt</span>, OAG <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Age</th>
      <td><p>integer vector of single ages (lower bound)</p></td>
    </tr>
    <tr>
      <th>AgeInt</th>
      <td><p>integer vector. Age interval widths</p></td>
    </tr>
    <tr>
      <th>OAG</th>
      <td><p>logical (default <code>TRUE</code>). Is the final age group open?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>logical. <code>TRUE</code> if the arguments are considered consistent.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>OAG</code> is <code>TRUE</code> then <code>AgeInt</code> must be coded as <code>NA</code>. If <code>Age</code> is not sorted then we sort both <code>Age</code> and <code>AgeInt</code>, assuming that they are in matched order. This isn't incoherence in itself, but a message is returned to the console.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>Age</span>    <span class='op'>&lt;-</span> <span class='fl'>0</span><span class='op'>:</span><span class='fl'>99</span>
<span class='va'>AgeInt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>100</span><span class='op'>)</span>
<span class='co'># closed, sequential, non-redundant ages, any easy yes:</span>
<span class='fu'>is_age_coherent</span><span class='op'>(</span>Age <span class='op'>=</span> <span class='va'>Age</span>, AgeInt <span class='op'>=</span> <span class='va'>AgeInt</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># TRUE</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># incorrectly coded OAG</span>
<span class='fu'>is_age_coherent</span><span class='op'>(</span>Age <span class='op'>=</span> <span class='va'>Age</span>, AgeInt <span class='op'>=</span> <span class='va'>AgeInt</span>, OAG <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>      <span class='co'># FALSE</span>
</div><div class='output co'>#&gt; <span class='message'>The AgeInt value for OAG should be NA, but it is1</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='co'># correctly coded OAG</span>
<span class='va'>AgeInt</span><span class='op'>[</span><span class='fl'>100</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='fu'>is_age_coherent</span><span class='op'>(</span>Age <span class='op'>=</span> <span class='va'>Age</span>, AgeInt <span class='op'>=</span> <span class='va'>AgeInt</span>, OAG <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>      <span class='co'># TRUE</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># correct unordered, but this isn't incoherence per se.</span>
<span class='co'># watch out though!</span>
<span class='va'>aaoo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fl'>100</span>, replace <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>is_age_coherent</span><span class='op'>(</span><span class='va'>Age</span><span class='op'>[</span><span class='va'>aaoo</span><span class='op'>]</span>, AgeInt <span class='op'>=</span> <span class='va'>AgeInt</span><span class='op'>[</span><span class='va'>aaoo</span><span class='op'>]</span>, OAG <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='co'># TRUE</span>
</div><div class='output co'>#&gt; <span class='message'>Age isn't sorted. Sorting Age and AgeInt</span>
#&gt; <span class='message'>under strong assumption that they are in matched order.</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># check redundancy</span>
<span class='va'>AgeRed</span>    <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>100</span>,<span class='fl'>70</span><span class='op'>)</span>
<span class='va'>AgeInt</span>    <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>100</span><span class='op'>)</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>
<span class='va'>ao</span>        <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span><span class='op'>(</span><span class='va'>AgeRed</span><span class='op'>)</span>
<span class='va'>AgeRed</span>    <span class='op'>&lt;-</span> <span class='va'>AgeRed</span><span class='op'>[</span><span class='va'>ao</span><span class='op'>]</span>
<span class='va'>AgeIntRed</span> <span class='op'>&lt;-</span> <span class='va'>AgeInt</span><span class='op'>[</span><span class='va'>ao</span><span class='op'>]</span>
<span class='fu'>is_age_coherent</span><span class='op'>(</span><span class='va'>AgeRed</span>, <span class='va'>AgeInt</span>, <span class='cn'>TRUE</span><span class='op'>)</span>  <span class='co'># FALSE</span>
</div><div class='output co'>#&gt; <span class='message'>At least one age repeated, ergo Age is incoherent</span></div><div class='output co'>#&gt; [1] FALSE</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sara Hertog, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


