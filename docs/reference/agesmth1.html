<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generic smoother over age or time — agesmth1 • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generic smoother over age or time — agesmth1" />
<meta property="og:description" content="One dimensional smoothing over age (or time) using either loess (&quot;loess&quot; or polynomial &quot;poly&quot; regression.
Results of loess may at times be similar to a two-step smooth_age_5() method followed by graduation (e.g. graduate_beers() or graduate_beers(),
but local totals are not not constrained for any of the agesmth1() methods at this time. Total counts are
constrained to the original total in all cases." />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.13.76</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetables_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generic smoother over age or time</h1>
    <small class="dont-index">Source: <a href='https://github.com/timriffe/DemoTools/blob/master/R/OGIVE.R'><code>R/OGIVE.R</code></a></small>
    <div class="hidden name"><code>agesmth1.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>One dimensional smoothing over age (or time) using either loess (<code>"loess"</code> or polynomial <code>"poly"</code> regression.
Results of loess may at times be similar to a two-step <code><a href='smooth_age_5.html'>smooth_age_5()</a></code> method followed by graduation (e.g. <code><a href='graduate_beers.html'>graduate_beers()</a></code> or <code><a href='graduate_beers.html'>graduate_beers()</a></code>,
but local totals are not not constrained for any of the <code>agesmth1()</code> methods at this time. Total counts are
constrained to the original total in all cases.</p>
    </div>

    <pre class="usage"><span class='fu'>agesmth1</span><span class='op'>(</span>
  <span class='va'>Value</span>,
  <span class='va'>Age</span>,
  method <span class='op'>=</span> <span class='st'>"loess"</span>,
  OAG <span class='op'>=</span> <span class='cn'>TRUE</span>,
  degree <span class='op'>=</span> <span class='fl'>2</span>,
  <span class='va'>trans</span>,
  pow <span class='op'>=</span> <span class='fl'>2</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Value</th>
      <td><p>numeric vector of counts in single, abridged, or 5-year age groups.</p></td>
    </tr>
    <tr>
      <th>Age</th>
      <td><p>integer vector of ages corresponding to the lower integer bound of the counts.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>character, either <code>"loess"</code> or <code>"poly"</code>.</p></td>
    </tr>
    <tr>
      <th>OAG</th>
      <td><p>logical. Whether or not the top age group is open. Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>degree</th>
      <td><p>integer degree of polynomial. Default 2.</p></td>
    </tr>
    <tr>
      <th>trans</th>
      <td><p>if a transformation is desired, either specify <code>"log"</code> or <code>"power"</code>, otherwise leave missing.</p></td>
    </tr>
    <tr>
      <th>pow</th>
      <td><p>if <code>"power"</code> specified for <code>trans</code> then the power transformation to apply.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional arguments passed to <code><a href='https://rdrr.io/r/stats/lm.html'>stats::lm()</a></code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>LOESS (locally weighted smoothing) helps to smooth data over age, preserving the open age group if necessary.
It is a popular tool to create a smooth line through a timeplot or scatter plot.
Loess smoothness may be tweaked by specifying an optional <code>"span"</code> argument.
Polynomial  fitting is used to smooth data over age or time fitting linear models.
It can be tweaked by changing the degree and by either log or power transforming.
The open age group can be kept as-is if desired by specifying <code>OAG = TRUE</code>.
May be used on any age groups, including irregularly spaced, single age, or 5-year age groups.
Predictions are only returned for the original age groups.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code>, <code><a href='https://rdrr.io/r/stats/loess.html'>loess</a></code> <code><a href='poly_smth1.html'>poly_smth1</a></code>, <code><a href='loess_smth1.html'>loess_smth1</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>Age</span> <span class='op'>&lt;-</span> <span class='fl'>0</span><span class='op'>:</span><span class='fl'>99</span>
 <span class='co'>#cols &lt;- RColorBrewer::brewer.pal(7,"Reds")[3:7]</span>
 <span class='va'>cols</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#FC9272"</span>, <span class='st'>"#FB6A4A"</span>, <span class='st'>"#EF3B2C"</span>, <span class='st'>"#CB181D"</span>, <span class='st'>"#99000D"</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>Age</span>,<span class='va'>pop1m_pasex</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"poly"</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>,col<span class='op'>=</span><span class='va'>cols</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"poly"</span>, degree <span class='op'>=</span> <span class='fl'>3</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='va'>cols</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"poly"</span>, degree <span class='op'>=</span> <span class='fl'>3</span>,
       trans <span class='op'>=</span> <span class='st'>"log"</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='va'>cols</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"poly"</span>, degree <span class='op'>=</span> <span class='fl'>3</span>,
       trans <span class='op'>=</span> <span class='st'>"power"</span>, pow <span class='op'>=</span> <span class='fl'>2</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='va'>cols</span><span class='op'>[</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"poly"</span>, degree <span class='op'>=</span> <span class='fl'>4</span>,
       trans <span class='op'>=</span> <span class='st'>"power"</span>, pow <span class='op'>=</span> <span class='fl'>3</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='va'>cols</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"loess"</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"royalblue"</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='fu'>agesmth1</span><span class='op'>(</span><span class='va'>pop1m_pasex</span>, <span class='va'>Age</span>, method<span class='op'>=</span><span class='st'>"loess"</span>, span <span class='op'>=</span> <span class='fl'>1</span>, OAG <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sara Hertog, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


