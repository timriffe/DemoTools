<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Group single ages into equal age groups of arbitrary width — groupAges • DemoTools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Group single ages into equal age groups of arbitrary width — groupAges" />
<meta property="og:description" content="This can be useful to check constrained sums, or as an intermediate step for smoothing." />
<meta property="og:image" content="https://timriffe.github.io/DemoTools/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-reverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DemoTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.13.76</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Short manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Age-heaping_quality_with_Demotools.html">Handle age heaping</a>
    </li>
    <li>
      <a href="../articles/graduation_with_demotools.html">Graduate demographic counts</a>
    </li>
    <li>
      <a href="../articles/smoothing_with_demotools.html">Smooth demographic counts</a>
    </li>
    <li>
      <a href="../articles/lifetables_with_demotools.html">Construct a lifetable</a>
    </li>
    <li>
      <a href="../articles/migration_with_demotools.html">Model migration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/case_study_1.html">Case study</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/timriffe1">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/timriffe/DemoTools/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Group single ages into equal age groups of arbitrary width</h1>
    <small class="dont-index">Source: <a href='https://github.com/timriffe/DemoTools/blob/master/R/utilsAge.R'><code>R/utilsAge.R</code></a></small>
    <div class="hidden name"><code>groupAges.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This can be useful to check constrained sums, or as an intermediate step for smoothing.</p>
    </div>

    <pre class="usage"><span class='fu'>groupAges</span><span class='op'>(</span>
  <span class='va'>Value</span>,
  Age <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>Value</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span>,
  N <span class='op'>=</span> <span class='fl'>5</span>,
  shiftdown <span class='op'>=</span> <span class='fl'>0</span>,
  <span class='va'>AgeN</span>,
  OAnew <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Value</th>
      <td><p>numeric. Vector of single age counts.</p></td>
    </tr>
    <tr>
      <th>Age</th>
      <td><p>integer. Vector of lower bounds of single age groups.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>integer. The desired width of resulting age groups. Default 5.</p></td>
    </tr>
    <tr>
      <th>shiftdown</th>
      <td><p>integer. Optionally shift age groupings down by single ages. Default 0.</p></td>
    </tr>
    <tr>
      <th>AgeN</th>
      <td><p>integer vector, otherwise calculated using <code><a href='calcAgeN.html'>calcAgeN()</a></code>. Optional argument.</p></td>
    </tr>
    <tr>
      <th>OAnew</th>
      <td><p>integer. Value of lower bound of new open age group.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Vector of counts in N-year age groups.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If you shift the groupings, then the first age groups may have a negative lower bound
(for example of -5). These counts would be discarded for the oscillatory version of Sprague smoothing,
for example, but they are preserved in this function. The important thing to know is that if you shift
the groups, the first and last groups will not be N years wide. For example if <code>shiftdown</code> is 1, the first age group is 4-ages wide. The ages themselves are not returned,
but they are the name attribute of the output count vector. Note this will also correctly group abridged ages
into equal 5-year age groups if the <code>Age</code> argument is explicitly given. <code>OAnew</code> (optional) must be less than or equal to <code><a href='https://rdrr.io/r/base/Extremes.html'>max(Age)</a></code> to have any effect.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='va'>Age</span> <span class='op'>&lt;-</span> <span class='fl'>0</span><span class='op'>:</span><span class='fl'>100</span>
 <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        5       10       15       20       25       30       35 
#&gt; 52360652 57419164 51947630 42231074 37514223 34546587 29917765 27558300 
#&gt;       40       45       50       55       60       65       70       75 
#&gt; 22842245 18954561 16904890 10941747 11907237  6493630  5535950  2102284 
#&gt;       80       85       90       95      100 
#&gt;  2094961   601000   421930   134360    72373 </div><div class='input'> <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span>, shiftdown <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        4        9       14       19       24       29       34 
#&gt; 40488149 61180144 51043772 46462353 37103293 37769292 29789068 28477079 
#&gt;       39       44       49       54       59       64       69       74 
#&gt; 22995247 19260609 16817385 11340613 11956304  6678264  5558252  2204548 
#&gt;       79       84       89       94       99 
#&gt;  2099864   630492   434099   120142    93594 </div><div class='input'> <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span>, shiftdown <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        3        8       13       18       23       28       33 
#&gt; 28606305 58749766 57901419 41370149 44922109 34463405 35589397 26237746 
#&gt;       38       43       48       53       58       63       68       73 
#&gt; 26220797 17645765 18902154 10652783 12975223  6530648  5993071  2181397 
#&gt;       78       83       88       93       98 
#&gt;  2229770   638809   468914   110427   112509 </div><div class='input'> <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span>, shiftdown <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        2        7       12       17       22       27       32 
#&gt; 17016196 60305957 54630220 49156093 40845737 40047411 33061379 30854134 
#&gt;       37       42       47       52       57       62       67       72 
#&gt; 24470101 20069309 17965797 12189059 12435565  7386079  5846470  2569058 
#&gt;       77       82       87       92       97 
#&gt;  2172557   755143   474788   133112   118398 </div><div class='input'> <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span>, shiftdown <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        1        6       11       16       21       26       31 
#&gt;  9544406 55784596 59761861 46962015 45271071 39210273 36881374 29289697 
#&gt;       36       41       46       51       56       61       66       71 
#&gt; 26664183 19587214 18732143 11806528 13122301  7426622  6055763  2581755 
#&gt;       76       81       86       91       96 
#&gt;  2211834   835651   473762   167976   131538 </div><div class='input'> <span class='fu'>groupAges</span><span class='op'>(</span><span class='va'>pop1m_ind</span>, N <span class='op'>=</span> <span class='fl'>5</span>, OAnew <span class='op'>=</span> <span class='fl'>80</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        0        5       10       15       20       25       30       35 
#&gt; 52360652 57419164 51947630 42231074 37514223 34546587 29917765 27558300 
#&gt;       40       45       50       55       60       65       70       75 
#&gt; 22842245 18954561 16904890 10941747 11907237  6493630  5535950  2102284 
#&gt;       80 
#&gt;  3324624 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tim Riffe, José Manuel Aburto, Ilya Kashnitsky, Monica Alexander, Marius D. Pascariu, Sara Hertog, Sean Fennell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


